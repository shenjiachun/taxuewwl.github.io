<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">

<style>/*---------------------------------------------------
    LESS Elements 0.9
  ---------------------------------------------------
    A set of useful LESS mixins
    More info at: http://lesselements.com
  ---------------------------------------------------*/
/**
 * https://github.com/rhiokim/markdown-css
 * solarized-light style
 * made by rhio.kim
 * powered by http://ethanschoonover.com/solarized
 */
body {
  padding: 20px;
  color: #737373;
  font-size: 1em;
  font-family: Sans-serif;
  background: #ffffff;
  -webkit-font-smoothing: antialiased;
}
a {
  color: #1e6ea7;
}
a:hover {
  color: #268bd2;
}
h1,
h2,
h3,
h4,
h5 {
  color: #404040;
}
h2 {
  border-bottom: 1px solid #cccccc;
}
h6 {
  color: #666666;
}
hr {
  border: 1px solid #e6e6e6;
}
pre > code {
/*  font-size: .9em;*/
  font-family: Consolas, Inconsolata, Courier, monospace;
}
blockquote {
  padding: 0 15px;
  font-style: italic;
}
blockquote:before {
  content: "\201C";
  font-size: 40px;
  margin-left: -20px;
  color: #aaa;
}
table {
  background-color: #ffffff;
  border-collapse: separate;
  border-spacing: 2px;
}
table tr th,
table tr td {
  border: 0px;
  padding: .2em 1em;
}
table tr th {
  border-bottom: 1px solid #bfbfbf;
}
table tr td {
  border-bottom: 1px solid #d9d9d9;
}
table tr:nth-child(2n) {
  background-color: #ffffff;
}
/**
 * after less
 */
</style>
</head>
<body>
<h1 id="L...webservice...eclipse......java.web......">【webservice】eclipse建立java web服务</h1>
<h3>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="../index.html">返回主页</a></h3>



<h2 id="L......webservice">何为webservice</h2>

<pre><code>Web service是一个平台独立的，低耦合的，自包含的、
基于可编程的web的应用程序，可使用开放的XML（标准通用标记语言下的一个子集）
标准来描述、发布、发现、协调和配置这些应用程序，
用于开发分布式的互操作的应用程序。 

Web Service技术， 能使得运行在不同机器上的不同应用无须借助附加的、
专门的第三方软件或硬件， 就可相互交换数据或集成。
依据Web Service规范实施的应用之间， 无论它们所使用的语言、 
平台或内部协议是什么， 都可以相互交换数据。Web Service是自描述、 
自包含的可用网络模块， 可以执行具体的业务功能。Web Service也很容易部署， 
因为它们基于一些常规的产业标准以及已有的一些技术，
诸如标准通用标记语言下的子集XML、HTTP。Web Service减少了应用接口的花费。
Web Service为整个企业甚至多个组织之间的业务流程的集成提供了一个通用机制。
    --引用自【百度百科webservice词条】
</code></pre>

<h3 id="L.strong.webservice..........................strong.........................webservice..........................."><strong>webservice能够实现跨端访问</strong>，移动端后台常用webservice提供信息传输接口。</h3>

<h2 id="L..................java...........................webservice...............">本文就是要用java语言实现一个简单的webservice程序并发布</h2>

<h3 id="L......">原料</h3>

<ol>
<li><p>eclipse-for-j2ee</p></li>
<li><p>chrome</p></li>
</ol>


<h2 id="L............java..............................">建立一个java工程添加以下代码文件</h2>

<h3 id="L......TimeServer">接口TimeServer</h3>

<pre><code>package ch01.ts;

import javax.jws.WebMethod;
import javax.jws.WebService;
import javax.jws.soap.SOAPBinding;
import javax.jws.soap.SOAPBinding.Style;

@WebService
@SOAPBinding(style = Style.RPC)
public interface TimeServer {
    @WebMethod
    String getTimeAsString();
    @WebMethod
    long getTimeAsElapsed();
}
</code></pre>

<p><strong>此处使用了两个注解@WebService和@WebMethod</strong></p>

<h3 id="L...TimeServerImpl............TimeServer">类TimeServerImpl实现接口TimeServer</h3>

<pre><code>    package ch01.ts;

    import java.util.Date;

    import javax.jws.WebService;


    @WebService(endpointInterface = "ch01.ts.TimeServer")
    public class TimeServerImpl implements TimeServer {


    @Override
    public String getTimeAsString() {
        return new Date().toString();
    }

    @Override
    public long getTimeAsElapsed() {
        return new Date().getTime();
    }

}
</code></pre>

<h3 id="L...TimerServerPublisher.........web......">类TimerServerPublisher发布该web服务</h3>

<pre><code>package ch01.ts;

import javax.xml.ws.Endpoint;

public class TimerServerPublisher {

    public static void main(String[] args) {
        Endpoint.publish("http://127.0.0.1:9876/ts", new TimeServerImpl());
    }
}
</code></pre>

<h2 id="L.............................................url....http:..127.0.0.1:9876.ts.wsdl.">编译该工程，并在浏览器输入如下url："<a href="http://127.0.0.1:9876/ts?wsdl">http://127.0.0.1:9876/ts?wsdl</a>"</h2>

<h3 id="L............">运行效果</h3>

<pre><code>This XML file does not appear to have any style information associated with it. The document tree is shown below.
&lt;!--
 Published by JAX-WS RI (http://jax-ws.java.net). RI's version is JAX-WS RI 2.2.9-b130926.1035 svn-revision#5f6196f2b90e9460065a4c2f4e30e065b245e51e. 
--&gt;
&lt;!--
 Generated by JAX-WS RI (http://jax-ws.java.net). RI's version is JAX-WS RI 2.2.9-b130926.1035 svn-revision#5f6196f2b90e9460065a4c2f4e30e065b245e51e. 
--&gt;
&lt;definitions xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:wsp="http://www.w3.org/ns/ws-policy" xmlns:wsp1_2="http://schemas.xmlsoap.org/ws/2004/09/policy" xmlns:wsam="http://www.w3.org/2007/05/addressing/metadata" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="http://ts.ch01/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://schemas.xmlsoap.org/wsdl/" targetNamespace="http://ts.ch01/" name="TimeServerImplService"&gt;
&lt;types/&gt;
&lt;message name="getTimeAsString"/&gt;
&lt;message name="getTimeAsStringResponse"&gt;
&lt;part name="return" type="xsd:string"/&gt;
&lt;/message&gt;
&lt;message name="getTimeAsElapsed"/&gt;
&lt;message name="getTimeAsElapsedResponse"&gt;
&lt;part name="return" type="xsd:long"/&gt;
&lt;/message&gt;
&lt;portType name="TimeServer"&gt;
&lt;operation name="getTimeAsString"&gt;
&lt;input wsam:Action="http://ts.ch01/TimeServer/getTimeAsStringRequest" message="tns:getTimeAsString"/&gt;
&lt;output wsam:Action="http://ts.ch01/TimeServer/getTimeAsStringResponse" message="tns:getTimeAsStringResponse"/&gt;
&lt;/operation&gt;
&lt;operation name="getTimeAsElapsed"&gt;
&lt;input wsam:Action="http://ts.ch01/TimeServer/getTimeAsElapsedRequest" message="tns:getTimeAsElapsed"/&gt;
&lt;output wsam:Action="http://ts.ch01/TimeServer/getTimeAsElapsedResponse" message="tns:getTimeAsElapsedResponse"/&gt;
&lt;/operation&gt;
&lt;/portType&gt;
&lt;binding name="TimeServerImplPortBinding" type="tns:TimeServer"&gt;
&lt;soap:binding transport="http://schemas.xmlsoap.org/soap/http" style="rpc"/&gt;
&lt;operation name="getTimeAsString"&gt;
&lt;soap:operation soapAction=""/&gt;
&lt;input&gt;
&lt;soap:body use="literal" namespace="http://ts.ch01/"/&gt;
&lt;/input&gt;
&lt;output&gt;
&lt;soap:body use="literal" namespace="http://ts.ch01/"/&gt;
&lt;/output&gt;
&lt;/operation&gt;
&lt;operation name="getTimeAsElapsed"&gt;
&lt;soap:operation soapAction=""/&gt;
&lt;input&gt;
&lt;soap:body use="literal" namespace="http://ts.ch01/"/&gt;
&lt;/input&gt;
&lt;output&gt;
&lt;soap:body use="literal" namespace="http://ts.ch01/"/&gt;
&lt;/output&gt;
&lt;/operation&gt;
&lt;/binding&gt;
&lt;service name="TimeServerImplService"&gt;
&lt;port name="TimeServerImplPort" binding="tns:TimeServerImplPortBinding"&gt;
&lt;soap:address location="http://127.0.0.1:9876/ts"/&gt;
&lt;/port&gt;
&lt;/service&gt;
&lt;/definitions&gt;
</code></pre>

<h2 id="L......">总结</h2>

<p>看到上述xml文档表示webservice运行成功。该文档即为发布程序自动生成的契约文档WSDL文档。</p>
<br><br><!--高速版，加载速度快，使用前需测试页面的兼容性-->
<div id="SOHUCS"></div>
<script>
  (function(){
    var appid = 'cyrzQ3Tl3',
    conf = 'prod_7de32d229db6f76ddc32e50802ff34f4';
    var doc = document,
    s = doc.createElement('script'),
    h = doc.getElementsByTagName('head')[0] || doc.head || doc.documentElement;
    s.type = 'text/javascript';
    s.charset = 'utf-8';
    s.src =  'http://assets.changyan.sohu.com/upload/changyan.js?conf='+ conf +'&appid=' + appid;
    h.insertBefore(s,h.firstChild);
    window.SCS_NO_IFRAME = true;
  })()
</script>  
</body>
</html>
